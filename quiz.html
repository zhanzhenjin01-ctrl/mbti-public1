<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>MBTI 专业测试</title>
  <link rel="stylesheet" href="style.css">
  <style>
    .scale-guide {
      display:flex;
      justify-content:space-between;
      font-size:12px;
      opacity:0.6;
      margin-top:10px;
    }
    .scale-center {
      text-align:center;
      font-size:12px;
      opacity:0.5;
      margin-top:8px;
    }
  </style>
</head>
<body>

<div class="container" id="card">

  <div class="progress">
    <div class="progress-bar" id="progressBar"></div>
  </div>

  <div class="question-count" id="questionCount"></div>

  <h1 id="questionText"></h1>

  <!-- 新增说明 -->
  <div class="scale-center">
    请选择你对该陈述的认同程度
  </div>

  <div class="scale-guide">
    <span>1 = 非常不同意</span>
    <span>5 = 非常同意</span>
  </div>

  <div class="options">
    <div class="circle" onclick="selectAnswer(1)">1</div>
    <div class="circle" onclick="selectAnswer(2)">2</div>
    <div class="circle" onclick="selectAnswer(3)">3</div>
    <div class="circle" onclick="selectAnswer(4)">4</div>
    <div class="circle" onclick="selectAnswer(5)">5</div>
  </div>

</div>

<script src="data.js"></script>
<script src="mbti.js"></script>

<script>
let currentQuestion = 0;
let answers = [];

function loadQuestion() {
  const card = document.getElementById("card");
  card.classList.add("slide");

  setTimeout(() => {
    document.getElementById("questionText").innerText = questions[currentQuestion].text;
    document.getElementById("questionCount").innerText =
      "第 " + (currentQuestion + 1) + " / " + questions.length + " 题";

    const progress = ((currentQuestion + 1) / questions.length) * 100;
    document.getElementById("progressBar").style.width = progress + "%";

    card.classList.remove("slide");
  }, 200);
}

function selectAnswer(value) {
  answers.push(value);
  currentQuestion++;

  if (currentQuestion < questions.length) {
    loadQuestion();
  } else {
    const result = calculateMBTI(answers);
    localStorage.setItem("mbtiResult", JSON.stringify(result));
    window.location.href = "result.html";
  }
}

loadQuestion();
</script>

</body>
</html>
