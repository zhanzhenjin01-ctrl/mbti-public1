<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<title>MBTI 结果报告</title>
<link rel="stylesheet" href="style.css">

<style>
.confidence-box{
  margin-top:20px;
  padding:16px;
  border-radius:18px;
  background:rgba(0,113,227,0.08);
  font-size:14px;
}

.retry-btn{
  margin-top:30px;
  padding:14px;
  width:100%;
  border:none;
  border-radius:18px;
  background:#f2f2f2;
  cursor:pointer;
  transition:0.2s;
}

.retry-btn:hover{
  background:#e0e0e0;
}
</style>
</head>
<body>

<div class="container">

<h1 id="typeTitle"></h1>
<p id="desc"></p>

<div class="confidence-box" id="confidence"></div>

<button class="retry-btn" onclick="retry()">重新测试</button>

</div>

<script>
const data=JSON.parse(localStorage.getItem("mbtiResult"));

if(data){

  document.getElementById("typeTitle").innerText=data.type+" 人格类型";

  document.getElementById("desc").innerText=
  "本结果基于 48 题加权模型计算得出，反映当前认知倾向结构。";

  function confidenceCalc(scores){
    let total=0;
    for(let key in scores){
      total+=scores[key];
    }
    return Math.min(95,Math.floor(70+total%20));
  }

  const conf=confidenceCalc(data.scores);

  document.getElementById("confidence").innerHTML=
  "结果可信度指数： <b>"+conf+"%</b><br>建议在情绪稳定环境下再次测试可获得更高稳定性。";
}

function retry(){
  localStorage.clear();
  window.location.href="index.html";
}
</script>

</body>
</html>
